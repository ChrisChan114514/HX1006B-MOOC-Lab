# lab_2_1 - 正弦波发生器

## 项目概述

本实验设计了一个基于ROM查找表的正弦波发生器，通过7位计数器循环遍历ROM地址，从ROM中读取预存的正弦波采样数据，输出8位数字正弦波信号。

## 工程文件说明

### 主要设计文件

- **`sin_gen.v`** - 顶层模块，正弦波发生器主模块

  - 实例化7位计数器（CNT7B）和ROM模块（ROM78）
  - 计数器输出作为ROM地址，ROM输出8位正弦波数据
- **`CNT7B.v`** - 7位计数器模块

  - 提供0-127的循环计数，作为ROM地址
  - 支持异步复位和使能控制
- **`ROM78.v`** - ROM IP核实现文件

  - Quartus生成的ROM IP核，深度128，宽度8位
  - 存储一个周期的正弦波采样数据（128个采样点）
- **`ROM78_bb.v`** - ROM IP核黑盒文件

  - ROM模块的接口定义文件，用于综合
- **`ROM78.qip`** - ROM IP核配置文件

  - Quartus IP文件，定义ROM的配置信息

### 数据文件

- **`data7X8.mif`** - ROM初始化数据文件

  - 包含128个8位正弦波采样数据（十六进制格式）
  - 数据范围从0x80（最小值）到0xFF（最大值），对应正弦波的一个完整周期
- **`mywave.mif`** - 备用波形数据文件（如存在）

### 仿真文件

- **`sin_gen_tb.v`** - 测试台（Testbench）
  - 用于ModelSim仿真验证
  - 提供时钟、复位、使能信号，观察输出波形

### 工程配置文件

- **`sin_gen.qpf`** - Quartus工程文件
- **`sin_gen.qsf`** - Quartus设置文件，包含引脚分配和器件配置
- **`stp1.stp`** - SignalTap II逻辑分析仪配置文件（用于在线调试）

## Verilog程序设计

### 模块层次结构

```
sin_gen (顶层)
├── CNT7B (7位计数器)
└── ROM78 (ROM查找表)
```

### 功能说明

1. **计数器模块（CNT7B）**

   - 在时钟上升沿递增计数，范围0-127
   - 支持异步低电平复位
   - 使能信号控制计数
2. **ROM模块（ROM78）**

   - 根据7位地址输出对应的8位正弦波数据
   - 时钟同步输出（寄存器输出）
3. **顶层模块（sin_gen）**

   - 连接计数器和ROM
   - 计数器输出 → ROM地址输入
   - ROM输出 → 正弦波数据输出

### 端口说明

| 端口   | 方向   | 位宽 | 说明                   |
| ------ | ------ | ---- | ---------------------- |
| clk    | input  | 1    | 系统时钟               |
| rst_n  | input  | 1    | 异步复位（低电平有效） |
| en     | input  | 1    | 使能信号               |
| Q[7:0] | output | 8    | 8位正弦波数据输出      |

## ModelSim仿真

使用 `sin_gen_tb.v` 进行功能仿真：

- 时钟周期：100ns（10MHz）
- 复位时间：150ns后释放
- 仿真时长：10000ns
- 观察Q[7:0]输出，应看到128个点的正弦波形循环输出

ChrisChan
2025/10/27
